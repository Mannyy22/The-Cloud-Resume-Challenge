import json
import boto3

def lambda_handler(event, context):
    
    visit_count: int = 0

    # Prepare the DynamoDB client
    dynamodb = boto3.resource("dynamodb")
    table_name = "mannyresume-visit-count"
    table = dynamodb.Table(table_name)

    response = table.get_item(Key={"mannyresume": "ResumeApp"})
    if "Item" in response:
        visit_count = response["Item"]["count"]
    
    visit_count +=1 
    table.put_item(Item={"mannyresume": "ResumeApp","count": visit_count })

    return {
        'statusCode': 200,
        'body': 'item added!